<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeShare - Blood Donor Management System</title>
    <link rel="stylesheet" href="styles/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-tint"></i>
                <span>LifeShare</span>
            </div>
            <p class="tagline">Connecting blood donors with those in need. Your single donation can save up to three lives.</p>
            <div class="user-menu" id="userMenu" style="display: none;">
                <button class="btn btn-outline btn-small" id="profileBtn">
                    <i class="fas fa-user"></i>
                    My Profile
                </button>
                <button class="btn btn-outline btn-small" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </header>

        <!-- Tabs -->
        <nav class="tabs">
            <div class="tab active" data-tab="register">
                <i class="fas fa-user-plus"></i>
                Register as Donor
            </div>
            <div class="tab" data-tab="donors">
                <i class="fas fa-users"></i>
                Find Donors 
                <span class="tab-badge" id="donorCountBadge">0</span>
            </div>
            <div class="tab" data-tab="profile" id="profileTab" style="display: none;">
                <i class="fas fa-id-card"></i>
                My Profile
            </div>
        </nav>

        <!-- Notification -->
        <div id="notification" class="notification"></div>

        <!-- Admin Login Modal -->
        <div id="adminLoginModal" class="modal">
            <div class="modal-content">
                <h3 class="modal-title">
                    <i class="fas fa-lock"></i>
                    Admin Login
                </h3>
                <form id="adminLoginForm">
                    <div class="form-group">
                        <label for="adminPassword">
                            <i class="fas fa-key"></i>
                            Admin Password
                        </label>
                        <input type="password" id="adminPassword" class="form-control" placeholder="Enter admin password" required>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn">
                            <i class="fas fa-sign-in-alt"></i>
                            Login
                        </button>
                        <button type="button" id="cancelAdminLogin" class="btn btn-outline">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="deleteModal" class="modal">
            <div class="modal-content">
                <h3 class="modal-title">
                    <i class="fas fa-exclamation-triangle text-danger"></i>
                    Confirm Deletion
                </h3>
                <p>Are you sure you want to delete this donor? This action cannot be undone.</p>
                <div class="modal-actions">
                    <button type="button" id="confirmDelete" class="btn btn-danger">
                        <i class="fas fa-trash"></i>
                        Delete Donor
                    </button>
                    <button type="button" id="cancelDelete" class="btn btn-outline">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                </div>
            </div>
        </div>

        <!-- Edit Donor Modal -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <h3 class="modal-title">
                    <i class="fas fa-edit"></i>
                    Update Your Information
                </h3>
                <form id="editDonorForm">
                    <input type="hidden" id="editId">
                    
                    <div class="profile-picture-upload">
                        <div class="profile-preview" id="profilePreview">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="file-input-wrapper">
                            <input type="file" id="editProfilePicture" accept="image/*">
                            <div class="file-input-label">
                                <i class="fas fa-camera"></i>
                                <span>Change Profile Picture</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editName">
                            <i class="fas fa-user"></i>
                            Full Name *
                        </label>
                        <input type="text" id="editName" class="form-control" placeholder="Enter your full name" required>
                    </div>

                    <div class="form-group">
                        <label for="editAge">
                            <i class="fas fa-birthday-cake"></i>
                            Age *
                        </label>
                        <input type="number" id="editAge" class="form-control" placeholder="Enter your age" min="18" max="65" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editPhone">
                                <i class="fas fa-phone"></i>
                                Phone Number *
                            </label>
                            <input type="tel" id="editPhone" class="form-control" placeholder="+880 1XXX-XXXXXX" required>
                        </div>
                        <div class="form-group">
                            <label for="editBloodType">
                                <i class="fas fa-tint"></i>
                                Blood Type
                            </label>
                            <select id="editBloodType" class="form-control">
                                <option value="">Select Blood Type</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editDistrict">
                                <i class="fas fa-map"></i>
                                District *
                            </label>
                            <select id="editDistrict" class="form-control" required>
                                <option value="">Select District</option>
                                <option value="Dhaka">Dhaka</option>
                                <option value="Chittagong">Chittagong</option>
                                <option value="Sylhet">Sylhet</option>
                                <option value="Khulna">Khulna</option>
                                <option value="Rajshahi">Rajshahi</option>
                                <option value="Barisal">Barisal</option>
                                <option value="Rangpur">Rangpur</option>
                                <option value="Mymensingh">Mymensingh</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editCity">
                                <i class="fas fa-city"></i>
                                City/Area *
                            </label>
                            <input type="text" id="editCity" class="form-control" placeholder="Your city or area" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editLastDonation">
                            <i class="fas fa-calendar-alt"></i>
                            Last Donation Date *
                        </label>
                        <input type="date" id="editLastDonation" class="form-control" required>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="submit" class="btn">
                            <i class="fas fa-save"></i>
                            Update Information
                        </button>
                        <button type="button" id="cancelEdit" class="btn btn-outline">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Register Tab Content -->
        <section class="tab-content active" id="register-tab">
            <h2 class="section-title">
                <i class="fas fa-user-plus"></i>
                Become a Blood Donor
                <small>* Required fields: Name, Age, Phone, District, City/Area and Last Donation Date</small>
            </h2>
            
            <div class="form-container">
                <form id="bloodDonorForm">
                    <div class="profile-picture-upload">
                        <div class="profile-preview" id="registerProfilePreview">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="file-input-wrapper">
                            <input type="file" id="registerProfilePicture" accept="image/*">
                            <div class="file-input-label">
                                <i class="fas fa-camera"></i>
                                <span>Add Profile Picture</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-user"></i>
                            Full Name *
                        </label>
                        <input type="text" id="name" class="form-control" placeholder="Enter your full name" required>
                    </div>

                    <div class="form-group">
                        <label for="age">
                            <i class="fas fa-birthday-cake"></i>
                            Age *
                        </label>
                        <input type="number" id="age" class="form-control" placeholder="Enter your age" min="18" max="65" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">
                                <i class="fas fa-phone"></i>
                                Phone Number *
                            </label>
                            <input type="tel" id="phone" class="form-control" placeholder="+880 1XXX-XXXXXX" required>
                        </div>
                        <div class="form-group">
                            <label for="bloodType">
                                <i class="fas fa-tint"></i>
                                Blood Type
                            </label>
                            <select id="bloodType" class="form-control">
                                <option value="">Select Blood Type</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="district">
                                <i class="fas fa-map"></i>
                                District *
                            </label>
                            <select id="district" class="form-control" required>
                                <option value="">Select District</option>
                                <option value="Dhaka">Dhaka</option>
                                <option value="Chittagong">Chittagong</option>
                                <option value="Sylhet">Sylhet</option>
                                <option value="Khulna">Khulna</option>
                                <option value="Rajshahi">Rajshahi</option>
                                <option value="Barisal">Barisal</option>
                                <option value="Rangpur">Rangpur</option>
                                <option value="Mymensingh">Mymensingh</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="city">
                                <i class="fas fa-city"></i>
                                City/Area *
                            </label>
                            <input type="text" id="city" class="form-control" placeholder="Your city or area" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastDonation">
                            <i class="fas fa-calendar-alt"></i>
                            Last Donation Date *
                        </label>
                        <input type="date" id="lastDonation" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="terms" required>
                            I agree to the terms and conditions and confirm that I meet the eligibility criteria for blood donation.
                        </label>
                    </div>
                    
                    <div class="form-submit">
                        <button type="submit" class="btn" id="submitBtn">
                            <span id="submitText">
                                <i class="fas fa-user-plus"></i>
                                Register as Donor
                            </span>
                            <div id="submitLoading" class="loading" style="display: none;"></div>
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Find Donors Tab Content -->
        <section class="tab-content" id="donors-tab">
            <div class="admin-panel" id="adminPanel" style="display: none;">
                <div class="admin-header">
                    <div class="admin-title">
                        <i class="fas fa-user-shield"></i>
                        Admin Panel
                    </div>
                    <div class="admin-actions">
                        <button id="logoutAdmin" class="btn btn-outline btn-small">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout Admin
                        </button>
                    </div>
                </div>
                <p>You are logged in as an administrator. You can now delete donor records and manage donor positions.</p>
            </div>
            
            <h2 class="section-title">
                <i class="fas fa-users"></i>
                Find Blood Donors
                <small>Connect with available donors in your area</small>
            </h2>
            
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalDonors">0</div>
                    <div class="stat-label">Total Donors</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="eligibleDonors">0</div>
                    <div class="stat-label">Eligible Now</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="universalDonors">0</div>
                    <div class="stat-label">O- Donors</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="recentDonors">0</div>
                    <div class="stat-label">Active This Week</div>
                </div>
            </div>
            
            <div class="admin-controls">
                <button id="exportBtn" class="btn btn-success">
                    <i class="fas fa-file-export"></i>
                    Export Data
                </button>
                <button id="refreshBtn" class="btn btn-info">
                    <i class="fas fa-sync-alt"></i>
                    Refresh Data
                </button>
                <button id="adminLoginBtn" class="btn btn-outline">
                    <i class="fas fa-user-shield"></i>
                    Admin Login
                </button>
                <div class="sort-controls">
                    <label>Sort by Name:</label>
                    <select id="sortByName" class="form-control">
                        <option value="asc">A-Z (Ascending)</option>
                        <option value="desc">Z-A (Descending)</option>
                    </select>
                </div>
            </div>
            
            <div class="search-filter">
                <select id="filterBloodType">
                    <option value="">All Blood Types</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
                <select id="filterDistrict">
                    <option value="">All Districts</option>
                    <option value="Dhaka">Dhaka</option>
                    <option value="Chittagong">Chittagong</option>
                    <option value="Sylhet">Sylhet</option>
                    <option value="Khulna">Khulna</option>
                    <option value="Rajshahi">Rajshahi</option>
                    <option value="Barisal">Barisal</option>
                    <option value="Rangpur">Rangpur</option>
                    <option value="Mymensingh">Mymensingh</option>
                </select>
                <input type="text" id="filterCity" placeholder="üìç Filter by city/area...">
                <select id="filterStatus">
                    <option value="">All Status</option>
                    <option value="eligible">Eligible Now</option>
                    <option value="not-eligible">Not Eligible</option>
                </select>
                <button id="clearFilters" class="btn btn-outline">
                    <i class="fas fa-times"></i>
                    Clear Filters
                </button>
            </div>
            
            <div class="donors-grid" id="donorsList">
                <!-- Donor cards will be dynamically added here -->
            </div>
        </section>

        <!-- Profile Tab Content -->
        <section class="tab-content" id="profile-tab">
            <h2 class="section-title">
                <i class="fas fa-id-card"></i>
                My Profile
                <small>Manage your donor information</small>
            </h2>
            
            <div class="profile-container" id="profileContainer">
                <!-- Profile content will be loaded here -->
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-heart"></i>
                    <span>LifeShare</span>
                </div>
                <div class="footer-text">
                    <p class="footer-organization">‡¶∏‡¶æ‡¶¶‡¶æ‡¶ï‡¶æ‡¶π ‡¶´‡¶æ‡¶®‡ßç‡¶° ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶ø‡¶§ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ</p>
                    <p class="footer-subtitle">A initiative powered by Sadaqah Fund</p>
                </div>
                <div class="footer-social">
                    <a href="#" class="social-link" title="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="social-link" title="Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                    <a href="#" class="social-link" title="Phone">
                        <i class="fas fa-phone"></i>
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 LifeShare Blood Donor Network. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
